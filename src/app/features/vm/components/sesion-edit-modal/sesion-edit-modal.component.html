<div class="fixed inset-0 z-50 bg-black/40" (click)="closeByBackdrop()"></div>

<div class="fixed inset-0 z-50 grid place-items-center pointer-events-none">
  <div class="pointer-events-auto w-full max-w-md rounded-2xl bg-white p-5 shadow-xl">
    <div class="flex items-start justify-between gap-4">
      <h3 class="text-lg font-semibold">Editar sesión</h3>
      <button class="text-gray-500 hover:text-gray-700" (click)="closed.emit()">
        <i class="fa-solid fa-xmark"></i>
      </button>
    </div>

    <form class="mt-4 space-y-4" [formGroup]="form" (ngSubmit)="submit()">
      <div>
        <label class="block text-sm font-medium mb-1">Fecha</label>
        <input type="date" class="w-full rounded-lg border p-2" formControlName="fecha">
      </div>

      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium mb-1">Hora inicio</label>
          <input type="time" class="w-full rounded-lg border p-2" formControlName="hora_inicio">
        </div>
        <div>
          <label class="block text-sm font-medium mb-1">Hora fin</label>
          <input type="time" class="w-full rounded-lg border p-2" formControlName="hora_fin">
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Lugar (opcional)</label>
        <input type="text" class="w-full rounded-lg border p-2" formControlName="lugar">
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Enlace (opcional)</label>
        <input type="text" class="w-full rounded-lg border p-2" formControlName="enlace">
      </div>

      <div>
        <label class="block text-sm font-medium mb-1">Observación (opcional)</label>
        <textarea rows="2" class="w-full rounded-lg border p-2" formControlName="observacion"></textarea>
      </div>

      <div *ngIf="serverError" class="text-sm text-red-600">{{ serverError }}</div>

      <div class="flex justify-end gap-2 pt-2">
        <button type="button" (click)="closed.emit()" class="px-4 py-2 rounded-lg border">Cancelar</button>
        <button type="submit" [disabled]="form.invalid || busy"
                class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60">
          <i *ngIf="busy" class="fa-solid fa-spinner fa-spin mr-2"></i>
          Guardar
        </button>
      </div>
    </form>
  </div>
</div>
